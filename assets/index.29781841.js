var V=Object.defineProperty;var D=Object.getOwnPropertySymbols;var L=Object.prototype.hasOwnProperty,M=Object.prototype.propertyIsEnumerable;var E=(t,e,o)=>e in t?V(t,e,{enumerable:!0,configurable:!0,writable:!0,value:o}):t[e]=o,b=(t,e)=>{for(var o in e||(e={}))L.call(e,o)&&E(t,o,e[o]);if(D)for(var o of D(e))M.call(e,o)&&E(t,o,e[o]);return t};import{o as y,c as u,a as n,b as _,u as F,R as O,w as x,d as U,F as P,e as h,t as f,f as A,r as S,g as N,h as d,v as k,i as I,j as C,k as Z,l as $,m as R,n as j,p as H,q as J}from"./vendor.ebf88665.js";const K=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const l of i.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&s(l)}).observe(document,{childList:!0,subtree:!0});function o(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerpolicy&&(i.referrerPolicy=r.referrerpolicy),r.crossorigin==="use-credentials"?i.credentials="include":r.crossorigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(r){if(r.ep)return;r.ep=!0;const i=o(r);fetch(r.href,i)}};K();const Y=h("Toys"),W={setup(t){return(e,o)=>(y(),u(P,null,[n("header",null,[n("nav",null,[_(F(O),{to:"/toyApp"},{default:x(()=>[Y]),_:1})])]),_(F(U))],64))}},p={query:T,get:z,post:G,put:X,remove:ee,postMany:Q};function T(t){var e=JSON.parse(localStorage.getItem(t))||[];return Promise.resolve(e)}function z(t,e){return T(t).then(o=>o.find(s=>s._id===e))}function G(t,e){return e._id=te(),T(t).then(o=>(o.unshift(e),g(t,o),e))}function Q(t,e){return T(t).then(o=>(o.push(...e),g(t,o),o))}function X(t,e){return T(t).then(o=>{const s=o.findIndex(r=>r._id===e._id);return o.splice(s,1,e),g(t,o),e})}function ee(t,e){return T(t).then(o=>{const s=o.findIndex(r=>r._id===e);o.splice(s,1),g(t,o)})}function g(t,e){localStorage.setItem(t,JSON.stringify(e))}function te(t=5){for(var e="",o="123456789",s=0;s<t;s++)e+=o.charAt(Math.floor(Math.random()*o.length));return e}const m="toysDB",c={query:oe,remove:re,save:ne,getById:ie,getEmptyToy:se};le();function oe(){return p.query(m)}function re(t){return p.query(m).then(e=>{e.findIndex(s=>s._id===t)!==-1&&p.remove(m,t)})}function ne(t){return t._id?p.put(m,t):p.post(m,t)}function ie(t){return p.query(m).then(e=>e.find(s=>s._id===t))}function se(){return{_id:"",name:"",price:"",type:"",createdAt:"",inStock:!0,labels:["Doll","Battery Powered","Baby"]}}function le(){p.query(m).then(t=>{(!t||!t.length)&&(t=[{_id:61,name:"et libero",price:67,type:"Adult",createdAt:"1986-05-11T14:23:18.396Z",inStock:!1,labels:["Doll","Battery Powered","Baby"]},{_id:62,name:"non dui",price:68,type:"Adult",createdAt:"1989-07-30T03:40:43.965Z",inStock:!1,labels:["Doll","Battery Powered","Baby"]},{_id:63,name:"dolor ante",price:95,type:"Adult",createdAt:"1985-07-30T21:51:26.827Z",inStock:!0,labels:["Doll","Battery Powered","Baby"]},{_id:64,name:"curabitur pulvinar",price:63,type:"Funny",createdAt:"1980-05-16T02:49:38.197Z",inStock:!1},{_id:65,name:"tincidunt morbi",price:31,type:"Adult",createdAt:"1984-08-06T16:49:57.515Z",inStock:!0},{_id:66,name:"tortor turpis",price:81,type:"Educational",createdAt:"1985-07-08T09:53:44.999Z",inStock:!1},{_id:67,name:"et porttitor",price:32,type:"Educational",createdAt:"1978-11-29T20:35:26.017Z",inStock:!0},{_id:68,name:"sapien sit",price:33,type:"Adult",createdAt:"1997-05-18T18:42:35.722Z",inStock:!1},{_id:69,name:"donec mi",price:47,type:"Funny",createdAt:"1993-09-05T21:50:14.532Z",inStock:!1,labels:["Doll","Battery Powered","Baby"]},{_id:70,name:"facilisis ipsum",price:96,type:"Educational",createdAt:"1996-04-02T06:54:50.102Z",inStock:!1,labels:["Doll","Battery Powered","Baby"]},{_id:71,name:"mattis eros",price:91,type:"Adult",createdAt:"1987-05-28T18:07:38.469Z",inStock:!1,labels:["Doll","Battery Powered","Baby"]},{_id:72,name:"sagittis ac",price:2,type:"Funny",createdAt:"1988-12-07T13:36:08.023Z",inStock:!0,labels:["Doll","Battery Powered","Baby"]},{_id:73,name:"augue non",price:91,type:"Funny",createdAt:"1994-12-26T17:19:27.079Z",inStock:!1,labels:["Doll","Battery Powered","Baby"]},{_id:74,name:"sit eros",price:83,type:"Funny",createdAt:"1994-12-11T07:17:52.734Z",inStock:!0,labels:["Doll","Battery Powered","Baby"]},{_id:75,name:"aenean sed",price:80,type:"Adult",createdAt:"1994-01-07T14:53:01.339Z",inStock:!0,labels:["Doll","Battery Powered","Baby"]},{_id:76,name:"aliquam vestibulum",price:96,type:"Funny",createdAt:"1975-10-03T13:35:43.159Z",inStock:!1,labels:["Doll","Battery Powered","Baby"]},{_id:77,name:"augue sed",price:70,type:"Adult",createdAt:"1985-09-19T02:10:11.606Z",inStock:!1,labels:["Doll","Battery Powered","Baby"]},{_id:78,name:"aliquam magna",price:73,type:"Educational",createdAt:"1985-12-07T21:18:03.634Z",inStock:!0,labels:["Doll","Battery Powered","Baby"]},{_id:79,name:"eros odio",price:15,type:"Adult",createdAt:"1977-12-25T10:20:03.074Z",inStock:!1,labels:["Doll","Battery Powered","Baby"]},{_id:80,name:"scelerisque porttitor",price:49,type:"Funny",createdAt:"1997-02-23T10:22:57.732Z",inStock:!1,labels:["Doll","Battery Powered","Baby"]}],p.postMany(m,t))})}var v=(t,e)=>{const o=t.__vccOpts||t;for(const[s,r]of e)o[s]=r;return o};const ae={props:{toy:{type:Object,required:!0}},methods:{},components:{}},de={class:"toy-preview"};function ye(t,e,o,s,r,i){return y(),u("section",de,[n("h3",null,f(o.toy.name),1),n("h3",null,f(o.toy.price),1),n("h3",null,f(o.toy.inStock),1)])}var ue=v(ae,[["render",ye]]);const ce={data(){return{toy:null}},created(){this.loadToy()},computed:{toyId(){return+this.$route.params.toyId}},methods:{loadToy(){c.getById(this.toyId).then(t=>{this.toy=t})}},watch:{toyId:{handler(){this.loadToy()},immediate:!0}}},pe={key:0,class:"toy-details"},me=n("h1",null,"Details",-1);function fe(t,e,o,s,r,i){return r.toy?(y(),u("section",pe,[me,h(" "+f(r.toy.name)+" "+f(r.toy.price)+" "+f(r.toy.type)+" "+f(r.toy.inStock),1)])):A("",!0)}var q=v(ce,[["render",fe]]);const _e={props:{toys:{type:Array,required:!0}},methods:{removeToy(t){this.$emit("removeToy",t)}},components:{toyPreview:ue,toyDetails:q}},he={key:0,class:"toy-list"},Te=h("Edit"),ve=h("Details"),be=["onClick"];function ke(t,e,o,s,r,i){const l=S("toyPreview"),B=S("router-link");return o.toys?(y(),u("section",he,[n("ul",null,[(y(!0),u(P,null,N(o.toys,a=>(y(),u("li",{key:a._id},[_(l,{toy:a},null,8,["toy"]),_(B,{to:"/edit/"+a._id},{default:x(()=>[Te]),_:2},1032,["to"]),_(B,{to:"/details/"+a._id},{default:x(()=>[ve]),_:2},1032,["to"]),n("button",{onClick:Xe=>i.removeToy(a._id)},"Delete",8,be)]))),128))])])):A("",!0)}var Be=v(_e,[["render",ke]]);const Se={data(){return{filterBy:{inStock:null,name:""}}},methods:{filter(){this.$emit("filterBy",b({},this.filterBy))}}},Ae={class:"toy-filter"},ge=n("h1",null,"Filter",-1),xe=h("Out of stock "),we=h("In stock ");function De(t,e,o,s,r,i){return y(),u("section",Ae,[ge,d(n("input",{type:"text",placeholder:"Search by name",onInput:e[0]||(e[0]=(...l)=>i.filter&&i.filter(...l)),"onUpdate:modelValue":e[1]||(e[1]=l=>r.filterBy.name=l)},null,544),[[k,r.filterBy.name]]),n("label",null,[d(n("input",{type:"radio",onChange:e[2]||(e[2]=(...l)=>i.filter&&i.filter(...l)),"onUpdate:modelValue":e[3]||(e[3]=l=>r.filterBy.inStock=l),value:""},null,544),[[I,r.filterBy.inStock]]),xe]),n("label",null,[d(n("input",{type:"radio",onChange:e[4]||(e[4]=(...l)=>i.filter&&i.filter(...l)),"onUpdate:modelValue":e[5]||(e[5]=l=>r.filterBy.inStock=l),value:"true"},null,544),[[I,r.filterBy.inStock]]),we])])}var Ee=v(Se,[["render",De]]);const Fe={data(){return{emptyToy:c.getEmptyToy()}},computed:{toys(){return this.$store.getters.toysForDisplay}},created(){this.$store.dispatch({type:"loadToys"}).then(()=>{})},methods:{removeToy(t){this.$store.dispatch({type:"removeToy",id:t})},addToy(){this.$store.dispatch({type:"addToy",toy:b({},this.emptyToy)}).then(()=>{this.emptyToy=c.getEmptyToy()})},filter(t){this.$store.dispatch({type:"filter",filterBy:t})}},components:{toyList:Be,toyFilter:Ee}},Ie={key:0,class:"toy-app"},Pe=n("h1",null,"Toy App",-1),Ze=n("hr",null,null,-1),$e=n("option",{disabled:"",value:""},"Type",-1),qe=n("option",{value:"Funny"},"Funny",-1),Ve=n("option",{value:"Adult"},"Adult",-1),Le=n("option",{value:"Educational"},"Educational",-1),Me=[$e,qe,Ve,Le],Oe=n("label",{for:"inStock"},"inStock",-1),Ue=n("button",{type:"submit"},"Add",-1),Ne=n("hr",null,null,-1);function Ce(t,e,o,s,r,i){const l=S("toyFilter"),B=S("toyList");return i.toys?(y(),u("section",Ie,[Pe,_(l,{onFilterBy:i.filter},null,8,["onFilterBy"]),Ze,n("form",{onSubmit:e[4]||(e[4]=$((...a)=>i.addToy&&i.addToy(...a),["prevent"]))},[d(n("input",{type:"text","onUpdate:modelValue":e[0]||(e[0]=a=>r.emptyToy.name=a),placeholder:"Enter name"},null,512),[[k,r.emptyToy.name]]),d(n("input",{type:"number","onUpdate:modelValue":e[1]||(e[1]=a=>r.emptyToy.price=a),placeholder:"Enter price"},null,512),[[k,r.emptyToy.price]]),d(n("select",{"onUpdate:modelValue":e[2]||(e[2]=a=>r.emptyToy.type=a)},Me,512),[[C,r.emptyToy.type]]),Oe,d(n("input",{id:"inStock",type:"checkbox","onUpdate:modelValue":e[3]||(e[3]=a=>r.emptyToy.inStock=a)},null,512),[[Z,r.emptyToy.inStock]]),Ue],32),Ne,_(B,{toys:i.toys,onRemoveToy:i.removeToy},null,8,["toys","onRemoveToy"])])):A("",!0)}var Re=v(Fe,[["render",Ce]]);const je={data(){return{toyToEdit:null}},created(){this.loadToy()},computed:{toyId(){return+this.$route.params.toyId}},methods:{loadToy(){c.getById(this.toyId).then(t=>{this.toyToEdit=b({},t)})},save(){this.$store.dispatch({type:"save",toy:b({},this.toyToEdit)})}},watch:{toyId:{handler(){this.loadToy()},immediate:!0}}},He={key:0,class:"toy-edit"},Je=n("h1",null,"Edit",-1),Ke=n("button",{type:"submit"},"Save",-1);function Ye(t,e,o,s,r,i){return r.toyToEdit?(y(),u("section",He,[Je,n("form",{onSubmit:e[3]||(e[3]=$((...l)=>i.save&&i.save(...l),["prevent"]))},[d(n("input",{type:"text","onUpdate:modelValue":e[0]||(e[0]=l=>r.toyToEdit.name=l)},null,512),[[k,r.toyToEdit.name]]),d(n("input",{type:"number","onUpdate:modelValue":e[1]||(e[1]=l=>r.toyToEdit.price=l)},null,512),[[k,r.toyToEdit.price]]),d(n("input",{type:"checkbox","onUpdate:modelValue":e[2]||(e[2]=l=>r.toyToEdit.isStock=l)},null,512),[[Z,r.toyToEdit.isStock]]),Ke],32)])):A("",!0)}var We=v(je,[["render",Ye]]);const ze=R({history:j(),routes:[{path:"/toyApp",name:"toyApp",component:Re},{path:"/details/:toyId",name:"toyDetails",component:q},{path:"/edit/:toyId",name:"toyEdit",component:We}]});var Ge={state:{toys:[],filterBy:{inStock:null,name:""}},getters:{toysForDisplay(t){var e=t.toys;if(t.filterBy.inStock!==null){const o=t.filterBy.inStock==="true";e=t.toys.filter(s=>s.inStock===o)}if(t.filterBy.name){const o=new RegExp(t.filterBy.name,"i");e=e.filter(s=>o.test(s.name))}return e}},mutations:{setToys(t,{toys:e}){t.toys=e},removeToy(t,{id:e}){const o=t.toys.findIndex(s=>s._id===e);t.toys.splice(o,1)},addToy(t,{savedToy:e}){t.toys.unshift(e)},setFilter(t,{filterBy:e}){t.filterBy=e}},actions:{removeToy({commit:t},{id:e}){return c.remove(e).then(()=>{t({type:"removeToy",id:e})})},loadToys({commit:t}){return c.query().then(e=>{t({type:"setToys",toys:e})})},save({commit:t},{toy:e}){return c.save(e)},addToy({commit:t},{toy:e}){return c.save(e).then(o=>{t({type:"addToy",savedToy:o})})},filter({commit:t},{filterBy:e}){t({type:"setFilter",filterBy:e})}}};const Qe=H({strict:!0,state:{},getters:{},mutations:{},actions:{},modules:{toyStore:Ge}});const w=J(W);w.use(ze);w.use(Qe);w.mount("#app");
